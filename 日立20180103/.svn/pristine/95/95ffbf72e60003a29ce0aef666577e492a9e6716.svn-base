@{
    ViewBag.Title = "采购合同列表";
    Layout = "~/Views/Shared/_EasyuiLayout.cshtml";
}

@section HeaderScript{
    <script src="~/Content/Areas/AreasCode030/szrl100/javaScript/businesscommand.js"></script>
    <script type="text/javascript">
    </script>
}

@section Body{
    <div data-options="region:'north', title: '采购合同信息', collapsible: false" style="height: 65px;">
        <table>
            <tr>
                <td>查询条件</td>
                <td style="height: 30px;">
                    <input type="text" id="input_condition_search" class="easyui-textbox" />
                </td>
                <td>
                    <input type="radio" name="input_condition_black" value="2" checked="checked" />全部
                    <input type="radio" name="input_condition_black" value="1" />黑名单
                    <input type="radio" name="input_condition_black" value="0" />非黑名单
                </td>
            </tr>
        </table>
    </div>
    <div data-options="region:'center'">
        <table id="dg" class="easyui-datagrid" data-type="1"
               url="/AreasCode030/szrl100/GetGysList"
               toolbar="#toolbar" pagination="true" fit="true"
               rownumbers="true" fitColumns="true" singleSelect="true">
            <thead>
                <tr>
                    <th field="rl10501" width="50">ID</th>
                    <th field="rl10502" width="50">作番号</th>
                    <th field="rl10503" width="50">采购申请单号</th>
                    <th field="rl10504" width="50">采购申请版本号</th>
                    <th field="rl10505" width="50">采购合同号</th>
                    <th field="rl10506" width="50">采购合同版本号</th>
                    <th field="rl10507" width="50">K1编码</th>
                    <th field="rl10508" width="50">预算分类</th>
                    <th field="rl10509" width="50">损耗费区分代码</th>
                    <th field="rl10510" width="50">供应商</th>
                    <th field="rl10511" width="50">合同发行年月日</th>
                    <th field="rl10512" width="50">登录者</th>
                    <th field="rl10513" width="50">现场名</th>
                    <th field="rl10514" width="50">现场住所</th>
                    <th field="rl10515" width="50">交货期</th>
                    <th field="rl10516" width="50">注文书回信日</th>
                    <th field="rl10517" width="50">合同附件上传日</th>
                    <th field="rl10518" width="50">发注分类</th>
                    <th field="rl10519" width="50">采购申请总金额</th>
                    <th field="rl10520" width="50">币种</th>
                    <th field="rl10521" width="50">采购明细合计金额</th>
                    <th field="rl10522" width="50">采购合同总金额（含税）</th>
                    <th field="rl10523" width="50">币种</th>
                    <th field="rl10524" width="50">采购合同税率</th>
                    <th field="rl10525" width="50">采购合同总金额（不含税）</th>
                    <th field="rl10526" width="50">运费（含税）</th>
                    <th field="rl10527" width="50">运费税率</th>
                    <th field="rl10528" width="50">低减金额</th>
                    <th field="rl10529" width="50">低减率</th>
                    <th field="rl10530" width="50">定金</th>
                    <th field="rl10531" width="50">定金银行保证金</th>
                    <th field="rl10532" width="50">采购申请单发行日</th>
                    <th field="rl10533" width="50">工程进度验收时</th>
                    <th field="rl10534" width="50">履行的银行保证金</th>
                    <th field="rl10535" width="50">定金支付期间</th>
                    <th field="rl10536" width="50">工程结束时</th>
                    <th field="rl10537" width="50">合同类型</th>
                    <th field="rl10538" width="50">保留金</th>
                    <th field="rl10539" width="50">订货方发货前</th>
                    <th field="rl10540" width="50">产品到达现场后</th>
                    <th field="rl10541" width="50">安装完毕</th>
                    <th field="rl10542" width="50">调试验收合格</th>
                    <th field="rl10543" width="50">施工图完成后</th>
                    <th field="rl10544" width="50">竣工图完成后</th>
                    <th field="rl10545" width="50">交货方式</th>
                    <th field="rl10546" width="50">进度验收支付期间</th>
                    <th field="rl10547" width="50">检收后支付期间</th>
                    <th field="rl10548" width="50">特别条件书</th>
                    <th field="rl10549" width="50">技术规格书</th>
                    <th field="rl10550" width="50">报价书</th>
                    <th field="rl10551" width="50">一般条件书</th>
                    <th field="rl10552" width="50">备注</th>
                    <th field="rl10553" width="50">定金</th>
                    <th field="rl10554" width="50">定金银行保证金</th>
                    <th field="rl10555" width="50">工程进度验收时</th>
                    <th field="rl10556" width="50">履行的银行保证金</th>
                    <th field="rl10557" width="50">工程结束时</th>
                    <th field="rl10558" width="50">保留金</th>
                    <th field="rl10559" width="50">订货方发货前</th>
                    <th field="rl10560" width="50">产品到达现场后</th>
                    <th field="rl10561" width="50">安装完毕</th>
                    <th field="rl10562" width="50">调试验收合格</th>
                    <th field="rl10563" width="50">施工图完成后</th>
                    <th field="rl10564" width="50">竣工图完成后</th>
                </tr>
            </thead>
        </table>
        <div id="toolbar">
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-search" plain="true" onclick="searchSuppliers()">查询</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newItem()">新增</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editItem()">编辑</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="deleteItem()">删除</a>
        </div>

        <div id="dlg" class="easyui-dialog" style="width:400px"
             closed="true" buttons="#dlg-buttons">
            <form id="fm" method="post" novalidate style="margin:0;padding:20px 50px">
                <div style="margin-bottom:20px;font-size:14px;border-bottom:1px solid #ccc">User Information</div>
                <div style="margin-bottom:10px">
                    <input name="firstname" class="easyui-textbox" required="true" label="First Name:" style="width:100%">
                </div>
                <div style="margin-bottom:10px">
                    <input name="lastname" class="easyui-textbox" required="true" label="Last Name:" style="width:100%">
                </div>
                <div style="margin-bottom:10px">
                    <input name="phone" class="easyui-textbox" required="true" label="Phone:" style="width:100%">
                </div>
                <div style="margin-bottom:10px">
                    <input name="email" class="easyui-textbox" required="true" validType="email" label="Email:" style="width:100%">
                </div>
            </form>
        </div>
        <div id="dlg-buttons">
            <a href="javascript:void(0)" class="easyui-linkbutton c6" iconCls="icon-ok" onclick="saveUser()" style="width:90px">Save</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#dlg').dialog('close')" style="width:90px">Cancel</a>
        </div>
        <script type="text/javascript">
            var url;
            function newItem() {
                window.open("/AreasCode030/szrl100/Edit");
            }
            function editItem() {
                var row = $('#dg').datagrid('getSelected');
                if (row) {
                    window.open("/AreasCode030/szrl100/Edit?id=" + row.rl10001);
                }
            }
            function deleteItem() {
                $.messager.confirm('确认消息', '是否删除？', function (r) {
                    if (r) {
                        var row = $('#dg').datagrid('getSelected');
                        rlform1101.post('/AreasCode030/szrl100/RemoveSupplier', { code: row.rl10002 }, function (result) {
                            $('#dg').datagrid('reload');    // reload the user data
                        });
                    }
                });
            }

            function searchSuppliers() {
                var key = $('#input_condition_search').val(),
                    black = $('input:radio[name=input_condition_black]:checked').val();
                var url = '/AreasCode030/szrl100/GetGysList?key=' + key + '&black=' + black;
                $('#dg').datagrid({ url: url });
            }
        </script>

    </div>

}
